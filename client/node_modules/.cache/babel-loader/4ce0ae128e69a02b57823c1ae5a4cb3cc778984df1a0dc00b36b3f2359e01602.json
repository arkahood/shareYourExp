{"ast":null,"code":"import _slicedToArray from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{API_NOTIFICATION_MESSAGE,SERVICE_URLs}from'../constants/config.js';import{getAccessToken,getType}from'../utils/common-utils.js';var API_URL=\"/api\";var axiosInstance=axios.create({baseURL:API_URL,timeout:10000,headers:{\"content-type\":\"application/json\"}});axiosInstance.interceptors.request.use(function(config){if(config.TYPE.params){config.params=config.TYPE.params;}else if(config.TYPE.query){config.url=config.url+\"/\"+config.TYPE.query;}return config;},function(error){return Promise.reject(error);});axiosInstance.interceptors.response.use(function(response){//Stop Global loader here\n// console.log(\"config intercepting while res: \",response);\nreturn processResponse(response);},function(err){//Stop Global loader here\nreturn Promise.reject(processError(err));});////////////////\n///////////////////////////////\n// If success -> returns { isSuccess: true, data: object }\n// If fail -> returns { isError: true, status: string, msg: string, code: int }\n//////////////////////////////\nvar processResponse=function processResponse(response){if((response===null||response===void 0?void 0:response.status)===200){return{isSuccess:true,data:response.data};}else{return{isFailure:true,status:response===null||response===void 0?void 0:response.status,msg:response===null||response===void 0?void 0:response.msg,code:response===null||response===void 0?void 0:response.code};}};var processError=function processError(error){if(error.response){// Request made and server responded with a status code \n// that falls out of the range of 200\nconsole.log(\"ERROR in response 89: \",error);return{isError:true,msg:API_NOTIFICATION_MESSAGE.responseFailure,code:error.response.status};}else if(error.request){console.log(\"ERROR in request : \",error.json());return{isError:true,msg:API_NOTIFICATION_MESSAGE.responseFailure,code:\"\"};}else{console.log(\"ERROR in NETWORK : \",error.json());return{isError:true,msg:API_NOTIFICATION_MESSAGE.responseFailure,code:\"\"};}};var API={};var _loop=function _loop(){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];API[key]=function(body,showUploadProgress,showDownloadProgress){return axiosInstance({method:value.method,url:value.url,data:value.method==='DELETE'?{}:body,responseType:value.responseType,headers:{authorization:getAccessToken()},TYPE:getType(value,body),onUploadProgress:function onUploadProgress(progressEvent){if(showUploadProgress){var percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);showUploadProgress(percentCompleted);}},onDownloadProgress:function onDownloadProgress(progressEvent){if(showDownloadProgress){var percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);showDownloadProgress(percentCompleted);}}});};};for(var _i=0,_Object$entries=Object.entries(SERVICE_URLs);_i<_Object$entries.length;_i++){_loop();}export{API};","map":{"version":3,"names":["axios","API_NOTIFICATION_MESSAGE","SERVICE_URLs","getAccessToken","getType","API_URL","axiosInstance","create","baseURL","timeout","headers","interceptors","request","use","config","TYPE","params","query","url","error","Promise","reject","response","processResponse","err","processError","status","isSuccess","data","isFailure","msg","code","console","log","isError","responseFailure","json","API","key","value","body","showUploadProgress","showDownloadProgress","method","responseType","authorization","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","onDownloadProgress","Object","entries"],"sources":["/home/arkajit/Desktop/shareYourExp/client/src/service/api.js"],"sourcesContent":["import axios from 'axios';\nimport { API_NOTIFICATION_MESSAGE, SERVICE_URLs } from '../constants/config.js';\nimport { getAccessToken, getType } from '../utils/common-utils.js';\n\nconst API_URL = \"/api\";\n\nconst axiosInstance = axios.create({\n    baseURL : API_URL,\n    timeout : 10000,\n    headers:{\n        \"content-type\" : \"application/json\"\n    }\n})\n\naxiosInstance.interceptors.request.use(\n    function(config) {\n        if (config.TYPE.params) {\n            config.params = config.TYPE.params\n        } else if (config.TYPE.query) {\n            config.url = config.url  +\"/\"+ config.TYPE.query;\n        }\n        return config;\n    },\n    function(error) {\n        return Promise.reject(error);\n    }\n);\n\naxiosInstance.interceptors.response.use(\n    function(response){\n        //Stop Global loader here\n        // console.log(\"config intercepting while res: \",response);\n        return processResponse(response);\n    },\n    function (err) {\n        //Stop Global loader here\n        return Promise.reject(processError(err));\n    }\n)\n\n////////////////\n\n///////////////////////////////\n// If success -> returns { isSuccess: true, data: object }\n// If fail -> returns { isError: true, status: string, msg: string, code: int }\n//////////////////////////////\n\nconst processResponse = (response) => {\n    if (response?.status === 200) {\n        return { isSuccess: true, data: response.data }\n    } else {\n        return {\n            isFailure: true,\n            status: response?.status,\n            msg: response?.msg,\n            code: response?.code\n        }\n    }\n}\n\nconst processError = (error)=>{\n    if(error.response){\n        // Request made and server responded with a status code \n        // that falls out of the range of 200\n        console.log(\"ERROR in response 89: \",error);\n        return {\n            isError : true,\n            msg : API_NOTIFICATION_MESSAGE.responseFailure,\n            code : error.response.status\n        }\n    }else if(error.request){\n        console.log(\"ERROR in request : \",error.json());\n        return {\n            isError : true,\n            msg : API_NOTIFICATION_MESSAGE.responseFailure,\n            code : \"\"\n        }\n    }else{\n        console.log(\"ERROR in NETWORK : \",error.json());\n        return {\n            isError : true,\n            msg : API_NOTIFICATION_MESSAGE.responseFailure,\n            code : \"\"\n        }\n    }\n}\n\n\n\nconst API = {};\n\nfor (const [key, value] of Object.entries(SERVICE_URLs)) {\n    API[key] = (body, showUploadProgress, showDownloadProgress) =>\n        axiosInstance({\n            method: value.method,\n            url: value.url,\n            data: value.method === 'DELETE' ? {} : body,\n            responseType: value.responseType,\n            headers : {\n                authorization : getAccessToken()\n            },\n            TYPE: getType(value, body),\n            onUploadProgress: function(progressEvent) {\n                if (showUploadProgress) {\n                    let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n                    showUploadProgress(percentCompleted);\n                }\n            },\n            onDownloadProgress: function(progressEvent) {\n                if (showDownloadProgress) {\n                    let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n                    showDownloadProgress(percentCompleted);\n                }\n            }\n        });\n}\n\nexport { API };\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}