{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _defineProperty from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3;import{useState}from\"react\";import{useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import{Box,Button,FormControl,InputBase,styled,TextareaAutosize}from\"@mui/material\";import{AddCircle as Add}from'@mui/icons-material';import{API}from\"../../service/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialPost={title:'',description:'',picture:'',username:'',categories:'',createdate:new Date()};var UpdatePost=function UpdatePost(){var _useState=useState(initialPost),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useParams=useParams(),id=_useParams.id;var url=post.picture?post.picture:'https://images.unsplash.com/photo-1543128639-4cb7e6eeef1b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wJTIwc2V0dXB8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80';var navigate=useNavigate();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return API.getPostById(id);case 2:response=_context.sent;if(response.isSuccess){setPost(response.data);}case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);useEffect(function(){var getImg=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var data,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!file){_context2.next=8;break;}data=new FormData();data.append(\"name\",file.name);data.append(\"file\",file);//API call\n_context2.next=6;return API.uploadFile(data);case 6:res=_context2.sent;if(res.isSuccess){post.picture=res.data;}case 8:case\"end\":return _context2.stop();}},_callee2);}));return function getImg(){return _ref2.apply(this,arguments);};}();getImg();},[file]);var handleChange=function handleChange(e){setPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},e.target.name,e.target.value)));};var updatePostandSave=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return API.updatePost(post);case 2:navigate(\"/details/\".concat(id));case 3:case\"end\":return _context3.stop();}},_callee3);}));return function updatePostandSave(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Image,{src:post.picture||url,alt:\"post\"}),/*#__PURE__*/_jsxs(StyledFormControl,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(Add,{fontSize:\"large\",color:\"action\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(InputTextField,{onChange:function onChange(e){return handleChange(e);},value:post.title,name:\"title\",placeholder:\"Title\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return updatePostandSave();},variant:\"contained\",color:\"primary\",children:\"Update\"})]}),/*#__PURE__*/_jsx(Textarea,{rowsMin:5,placeholder:\"Tell your story...\",name:\"description\",onChange:function onChange(e){return handleChange(e);},value:post.description})]});};var Container=styled(Box)(function(_ref4){var theme=_ref4.theme;return _defineProperty({margin:'50px 100px'},theme.breakpoints.down('md'),{margin:0});});var Image=styled('img')({width:'100%',height:'50vh',objectFit:'cover'});var StyledFormControl=styled(FormControl)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-top: 10px;\\n    display: flex;\\n    flex-direction: row;\\n\"])));var InputTextField=styled(InputBase)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    flex: 1;\\n    margin: 0 30px;\\n    font-size: 25px;\\n\"])));var Textarea=styled(TextareaAutosize)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    border: none;\\n    margin-top: 50px;\\n    font-size: 18px;\\n    &:focus-visible {\\n        outline: none;\\n    }\\n\"])));export default UpdatePost;","map":{"version":3,"names":["useState","useEffect","useNavigate","useParams","Box","Button","FormControl","InputBase","styled","TextareaAutosize","AddCircle","Add","API","initialPost","title","description","picture","username","categories","createdate","Date","UpdatePost","post","setPost","file","setFile","id","url","navigate","fetchData","getPostById","response","isSuccess","data","getImg","FormData","append","name","uploadFile","res","handleChange","e","target","value","updatePostandSave","updatePost","display","files","Container","theme","margin","breakpoints","down","Image","width","height","objectFit","StyledFormControl","InputTextField","Textarea"],"sources":["/home/arkajit/Desktop/shareYourExp/client/src/components/create/UpdatePost.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useEffect } from \"react\";\n\nimport { useNavigate ,useParams} from \"react-router-dom\";\n\nimport { Box, Button, FormControl, InputBase, styled, TextareaAutosize } from \"@mui/material\";\nimport { AddCircle as Add } from '@mui/icons-material';\n\nimport { API } from \"../../service/api\";\n\n\nconst initialPost = {\n    title : '',\n    description : '',\n    picture : '',\n    username : '',\n    categories : '',\n    createdate : new Date()\n}\n\n\nconst UpdatePost = ()=> {\n\n    \n    const [post, setPost] = useState(initialPost);\n    const [file,setFile] = useState('');\n    const { id } = useParams();\n    \n    const url = post.picture ? post.picture  : 'https://images.unsplash.com/photo-1543128639-4cb7e6eeef1b?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8bGFwdG9wJTIwc2V0dXB8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80';\n    \n    const navigate = useNavigate();\n\n    useEffect(()=>{\n        const fetchData = async () => {\n            let response = await API.getPostById(id);\n            if (response.isSuccess) {\n                setPost(response.data);\n            }\n        }\n        fetchData();\n    },[])\n    \n    useEffect(()=>{\n        const getImg = async()=>{\n            if(file){\n                const data = new FormData();\n                data.append(\"name\",file.name);\n                data.append(\"file\",file);\n                \n                //API call\n                const res = await API.uploadFile(data);\n                if(res.isSuccess){\n                    post.picture = res.data;\n                }\n            }\n        }\n        getImg();\n    },[file])\n    \n    const handleChange = (e)=>{\n        setPost({...post,[e.target.name]:e.target.value});\n    }\n  \n    const updatePostandSave = async()=>{\n        await API.updatePost(post);\n        navigate(`/details/${id}`);\n    }\n\n    return (\n        <Container>\n            <Image src={post.picture || url} alt=\"post\" />\n\n            <StyledFormControl>\n                <label htmlFor=\"fileInput\">\n                    <Add fontSize=\"large\" color=\"action\" />\n                </label>\n                <input\n                    type=\"file\"\n                    id=\"fileInput\"\n                    style={{ display: \"none\" }}\n                    onChange={(e) => setFile(e.target.files[0])}\n                />\n                <InputTextField onChange={(e) => handleChange(e)} value={post.title} name='title' placeholder=\"Title\" />\n                <Button onClick={() => updatePostandSave()} variant=\"contained\" color=\"primary\">Update</Button>\n            </StyledFormControl>\n\n            <Textarea\n                rowsMin={5}\n                placeholder=\"Tell your story...\"\n                name='description'\n                onChange={(e) => handleChange(e)} \n                value={post.description}\n            />\n        </Container>\n  )\n}\n\n\nconst Container = styled(Box)(({ theme }) => ({\n    margin: '50px 100px',\n    [theme.breakpoints.down('md')]: {\n        margin: 0\n    }\n}));\nconst Image = styled('img')({\n    width: '100%',\n    height: '50vh',\n    objectFit: 'cover'\n});\n\nconst StyledFormControl = styled(FormControl)`\n    margin-top: 10px;\n    display: flex;\n    flex-direction: row;\n`;\n\nconst InputTextField = styled(InputBase)`\n    flex: 1;\n    margin: 0 30px;\n    font-size: 25px;\n`;\nconst Textarea = styled(TextareaAutosize)`\n    width: 100%;\n    border: none;\n    margin-top: 50px;\n    font-size: 18px;\n    &:focus-visible {\n        outline: none;\n    }\n`;\n\nexport default UpdatePost;"],"mappings":"i1BAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,SAAS,KAAQ,OAAO,CAEjC,OAASC,WAAW,CAAEC,SAAS,KAAO,kBAAkB,CAExD,OAASC,GAAG,CAAEC,MAAM,CAAEC,WAAW,CAAEC,SAAS,CAAEC,MAAM,CAAEC,gBAAgB,KAAQ,eAAe,CAC7F,OAASC,SAAS,GAAIC,IAAG,KAAQ,qBAAqB,CAEtD,OAASC,GAAG,KAAQ,mBAAmB,CAAC,wFAGxC,GAAMC,YAAW,CAAG,CAChBC,KAAK,CAAG,EAAE,CACVC,WAAW,CAAG,EAAE,CAChBC,OAAO,CAAG,EAAE,CACZC,QAAQ,CAAG,EAAE,CACbC,UAAU,CAAG,EAAE,CACfC,UAAU,CAAG,GAAIC,KAAI,EACzB,CAAC,CAGD,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAQ,CAGpB,cAAwBrB,QAAQ,CAACa,WAAW,CAAC,wCAAtCS,IAAI,eAAEC,OAAO,eACpB,eAAuBvB,QAAQ,CAAC,EAAE,CAAC,yCAA5BwB,IAAI,eAACC,OAAO,eACnB,eAAetB,SAAS,EAAE,CAAlBuB,EAAE,YAAFA,EAAE,CAEV,GAAMC,IAAG,CAAGL,IAAI,CAACN,OAAO,CAAGM,IAAI,CAACN,OAAO,CAAI,wJAAwJ,CAEnM,GAAMY,SAAQ,CAAG1B,WAAW,EAAE,CAE9BD,SAAS,CAAC,UAAI,CACV,GAAM4B,UAAS,4FAAG,uKACOjB,IAAG,CAACkB,WAAW,CAACJ,EAAE,CAAC,QAApCK,QAAQ,eACZ,GAAIA,QAAQ,CAACC,SAAS,CAAE,CACpBT,OAAO,CAACQ,QAAQ,CAACE,IAAI,CAAC,CAC1B,CAAC,qDACJ,kBALKJ,UAAS,0CAKd,CACDA,SAAS,EAAE,CACf,CAAC,CAAC,EAAE,CAAC,CAEL5B,SAAS,CAAC,UAAI,CACV,GAAMiC,OAAM,6FAAG,0JACRV,IAAI,0BACGS,IAAI,CAAG,GAAIE,SAAQ,EAAE,CAC3BF,IAAI,CAACG,MAAM,CAAC,MAAM,CAACZ,IAAI,CAACa,IAAI,CAAC,CAC7BJ,IAAI,CAACG,MAAM,CAAC,MAAM,CAACZ,IAAI,CAAC,CAExB;AAAA,uBACkBZ,IAAG,CAAC0B,UAAU,CAACL,IAAI,CAAC,QAAhCM,GAAG,gBACT,GAAGA,GAAG,CAACP,SAAS,CAAC,CACbV,IAAI,CAACN,OAAO,CAAGuB,GAAG,CAACN,IAAI,CAC3B,CAAC,uDAER,kBAZKC,OAAM,2CAYX,CACDA,MAAM,EAAE,CACZ,CAAC,CAAC,CAACV,IAAI,CAAC,CAAC,CAET,GAAMgB,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAG,CACtBlB,OAAO,gCAAKD,IAAI,wBAAEmB,CAAC,CAACC,MAAM,CAACL,IAAI,CAAEI,CAAC,CAACC,MAAM,CAACC,KAAK,GAAE,CACrD,CAAC,CAED,GAAMC,kBAAiB,6FAAG,gKAChBhC,IAAG,CAACiC,UAAU,CAACvB,IAAI,CAAC,QAC1BM,QAAQ,oBAAaF,EAAE,EAAG,CAAC,uDAC9B,kBAHKkB,kBAAiB,2CAGtB,CAED,mBACI,MAAC,SAAS,yBACN,KAAC,KAAK,EAAC,GAAG,CAAEtB,IAAI,CAACN,OAAO,EAAIW,GAAI,CAAC,GAAG,CAAC,MAAM,EAAG,cAE9C,MAAC,iBAAiB,yBACd,cAAO,OAAO,CAAC,WAAW,uBACtB,KAAC,GAAG,EAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAG,EACnC,cACR,cACI,IAAI,CAAC,MAAM,CACX,EAAE,CAAC,WAAW,CACd,KAAK,CAAE,CAAEmB,OAAO,CAAE,MAAO,CAAE,CAC3B,QAAQ,CAAE,kBAACL,CAAC,QAAKhB,QAAO,CAACgB,CAAC,CAACC,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAC,EAC9C,cACF,KAAC,cAAc,EAAC,QAAQ,CAAE,kBAACN,CAAC,QAAKD,aAAY,CAACC,CAAC,CAAC,EAAC,CAAC,KAAK,CAAEnB,IAAI,CAACR,KAAM,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAG,cACxG,KAAC,MAAM,EAAC,OAAO,CAAE,yBAAM8B,kBAAiB,EAAE,EAAC,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,UAAC,QAAM,EAAS,GAC/E,cAEpB,KAAC,QAAQ,EACL,OAAO,CAAE,CAAE,CACX,WAAW,CAAC,oBAAoB,CAChC,IAAI,CAAC,aAAa,CAClB,QAAQ,CAAE,kBAACH,CAAC,QAAKD,aAAY,CAACC,CAAC,CAAC,EAAC,CACjC,KAAK,CAAEnB,IAAI,CAACP,WAAY,EAC1B,GACM,CAEpB,CAAC,CAGD,GAAMiC,UAAS,CAAGxC,MAAM,CAACJ,GAAG,CAAC,CAAC,mBAAG6C,MAAK,OAALA,KAAK,yBAClCC,MAAM,CAAE,YAAY,EACnBD,KAAK,CAACE,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC,CAAG,CAC5BF,MAAM,CAAE,CACZ,CAAC,GACH,CAAC,CACH,GAAMG,MAAK,CAAG7C,MAAM,CAAC,KAAK,CAAC,CAAC,CACxB8C,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,SAAS,CAAE,OACf,CAAC,CAAC,CAEF,GAAMC,kBAAiB,CAAGjD,MAAM,CAACF,WAAW,CAAC,wIAI5C,CAED,GAAMoD,eAAc,CAAGlD,MAAM,CAACD,SAAS,CAAC,8HAIvC,CACD,GAAMoD,SAAQ,CAAGnD,MAAM,CAACC,gBAAgB,CAAC,6MAQxC,CAED,cAAeY,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}