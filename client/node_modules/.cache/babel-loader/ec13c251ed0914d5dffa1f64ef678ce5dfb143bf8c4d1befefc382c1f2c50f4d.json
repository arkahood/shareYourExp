{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _regeneratorRuntime from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import{TextField,Box,Button,Typography,styled}from'@mui/material';import{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import{DataContext}from'../../context/DataProvider';import{API}from'../../service/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var isUserAuthenticated=_ref.isUserAuthenticated;var imageURL='https://www.sesta.it/wp-content/uploads/2021/03/logo-blog-sesta-trasparente.png';var initialAccDetails={name:'',username:'',password:''};var initialLoginValue={username:'',password:''};var _useState=useState('Login'),_useState2=_slicedToArray(_useState,2),acc=_useState2[0],setAcc=_useState2[1];var _useState3=useState(initialAccDetails),_useState4=_slicedToArray(_useState3,2),accDetail=_useState4[0],setAccDetail=_useState4[1];var _useState5=useState(initialLoginValue),_useState6=_slicedToArray(_useState5,2),login=_useState6[0],setLogin=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],showError=_useState8[1];var _useContext=useContext(DataContext),setAccount=_useContext.setAccount;var navigate=useNavigate();var toogleAcc=function toogleAcc(){acc==='Login'?setAcc('SignUp'):setAcc('Login');};var onInputChange=function onInputChange(e){setAccDetail(_objectSpread(_objectSpread({},accDetail),{},_defineProperty({},e.target.name,e.target.value)));// console.log(accDetail);\n};var signupUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.userSignup(accDetail);case 3:setAccDetail(initialAccDetails);setAcc('Login');showError('');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);showError('Something went wrong! please try again later');case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function signupUser(){return _ref2.apply(this,arguments);};}();//For Login\nvar onLoginChange=function onLoginChange(e){setLogin(_objectSpread(_objectSpread({},login),{},_defineProperty({},e.target.name,e.target.value)));};var loginUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.userLogin(login);case 2:res=_context2.sent;if(res.isSuccess){showError('');sessionStorage.setItem('accessToken',\"Bearer \".concat(res.data.accessToken));sessionStorage.setItem('refreshToken',\"Bearer \".concat(res.data.refreshToken));setAccount({username:res.data.username,name:res.data.name});console.log(res);isUserAuthenticated(true);navigate(\"/\");}else{showError('Something went wrong! please try again later');}case 4:case\"end\":return _context2.stop();}},_callee2);}));return function loginUser(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Component,{children:[/*#__PURE__*/_jsx(Image,{src:imageURL,alt:\"blog\"}),acc==='Login'?/*#__PURE__*/ // This is for Login Screen\n_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"standard\",name:\"username\",onChange:function onChange(e){return onLoginChange(e);}}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",variant:\"standard\",name:\"password\",onChange:function onChange(e){return onLoginChange(e);}}),error&&/*#__PURE__*/_jsx(Error,{children:error}),/*#__PURE__*/_jsx(LoginButton,{variant:\"standard\",onClick:function onClick(){return loginUser();},children:\"Login\"}),/*#__PURE__*/_jsx(Text,{style:{textAlign:'center'},children:\"OR\"}),/*#__PURE__*/_jsx(SignupButton,{onClick:function onClick(){return toogleAcc();},children:\"Create an Account\"})]}):/*#__PURE__*/ // This is For Sign Up Screen\n_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(TextField,{label:\"Name\",variant:\"standard\",name:\"name\",onChange:function onChange(e){return onInputChange(e);}}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"standard\",name:\"username\",onChange:function onChange(e){return onInputChange(e);}}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",variant:\"standard\",name:\"password\",onChange:function onChange(e){return onInputChange(e);}}),error&&/*#__PURE__*/_jsx(Error,{children:error}),/*#__PURE__*/_jsx(SignupButton,{variant:\"standard\",onClick:function onClick(){return signupUser();},children:\"Sign Up\"}),/*#__PURE__*/_jsx(Text,{style:{textAlign:'center'},children:\"OR\"}),/*#__PURE__*/_jsx(LoginButton,{onClick:function onClick(){return toogleAcc();},children:\"Already Have an Account\"})]})]});};var Component=styled(Box)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 400px;\\n    margin: auto;\\n    box-shadow: 5px 2px 5px 2px rgb(0 0 0/ 0.6);\\n\"])));var Image=styled('img')({width:100,display:'flex',margin:'auto',padding:'50px 0 0'});var Wrapper=styled(Box)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    padding: 25px 35px;\\n    display: flex;\\n    flex: 1;\\n    overflow: auto;\\n    flex-direction: column;\\n    & > div, & > button, & > p {\\n        margin-top: 20px;\\n    }\\n\"])));var LoginButton=styled(Button)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    text-transform: none;\\n    background: #FB641B;\\n    color: #fff;\\n    height: 48px;\\n    border-radius: 2px;\\n\"])));var SignupButton=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    text-transform: none;\\n    background: #fff;\\n    color: #2874f0;\\n    height: 48px;\\n    border-radius: 2px;\\n    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 20%);\\n\"])));var Text=styled(Typography)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    color: #878787;\\n    font-size: 12px;\\n\"])));var Error=styled(Typography)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    font-size: 10px;\\n    color: #ff6161;\\n    line-height: 0;\\n    margin-top: 10px;\\n    font-weight: 600;\\n\"])));export default Login;","map":{"version":3,"names":["TextField","Box","Button","Typography","styled","useState","useContext","useNavigate","DataContext","API","Login","isUserAuthenticated","imageURL","initialAccDetails","name","username","password","initialLoginValue","acc","setAcc","accDetail","setAccDetail","login","setLogin","error","showError","setAccount","navigate","toogleAcc","onInputChange","e","target","value","signupUser","userSignup","onLoginChange","loginUser","userLogin","res","isSuccess","sessionStorage","setItem","data","accessToken","refreshToken","console","log","textAlign","Component","Image","width","display","margin","padding","Wrapper","LoginButton","SignupButton","Text","Error"],"sources":["/home/arkajit/Desktop/shareYourExp/client/src/components/account/Login.jsx"],"sourcesContent":["import { TextField, Box, Button, Typography, styled } from '@mui/material';\nimport { useState , useContext} from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { DataContext } from '../../context/DataProvider';\n\nimport { API } from '../../service/api';\n\nconst Login = ({isUserAuthenticated})=>{\n\n\n    const imageURL = 'https://www.sesta.it/wp-content/uploads/2021/03/logo-blog-sesta-trasparente.png';\n    const initialAccDetails = {\n        name: '',\n        username: '',\n        password: '',\n    }\n    const initialLoginValue = {\n        username : '',\n        password : ''\n    }\n\n    const [acc,setAcc] = useState('Login');\n    const [accDetail, setAccDetail] = useState(initialAccDetails);\n    const [login, setLogin] = useState(initialLoginValue);\n    const [error, showError] = useState('');\n\n    const {setAccount} = useContext(DataContext);\n    const navigate = useNavigate();\n\n    const toogleAcc = ()=>{\n        acc === 'Login' ? setAcc('SignUp') : setAcc('Login');\n    }\n\n    const onInputChange = (e)=>{\n        setAccDetail({...accDetail,[e.target.name]:e.target.value});\n        // console.log(accDetail);\n    }\n\n    const signupUser =  async()=>{\n        try {\n            await API.userSignup(accDetail);\n            setAccDetail(initialAccDetails);\n            setAcc('Login');\n            showError('')\n        } catch (error) {\n            showError('Something went wrong! please try again later');\n        } \n    }\n\n    //For Login\n\n    const onLoginChange = (e)=>{\n        setLogin({...login,[e.target.name] : e.target.value});\n    }\n\n    const loginUser = async()=>{\n        let res = await API.userLogin(login);\n        if(res.isSuccess){\n            showError('');\n            sessionStorage.setItem('accessToken',`Bearer ${res.data.accessToken}`);\n            sessionStorage.setItem('refreshToken',`Bearer ${res.data.refreshToken}`);\n\n            setAccount({username: res.data.username, name : res.data.name});\n            console.log(res);\n            isUserAuthenticated(true);\n            navigate(\"/\");\n        }else{\n            showError('Something went wrong! please try again later');\n        }\n    }\n\n    return(\n        <Component>\n            <Image src= {imageURL} alt='blog'/>\n            {acc === 'Login' ?\n                // This is for Login Screen\n                <Wrapper>\n                    <TextField label=\"Username\" variant=\"standard\" name='username' onChange={(e)=>onLoginChange(e)}/>\n                    <TextField label=\"Password\" variant=\"standard\" name='password' onChange={(e)=>onLoginChange(e)}/>\n\n                    {error && <Error>{error}</Error>}\n\n                    <LoginButton variant='standard' onClick={()=> loginUser()}>Login</LoginButton>\n                    <Text style={{ textAlign: 'center' }}>OR</Text>\n                    <SignupButton onClick={()=> toogleAcc()}>Create an Account</SignupButton>\n                </Wrapper>\n            :\n                // This is For Sign Up Screen\n                <Wrapper>\n                    <TextField label=\"Name\" variant=\"standard\" name='name' onChange={(e)=>onInputChange(e)}/>\n                    <TextField label=\"Username\" variant=\"standard\" name='username' onChange={(e)=>onInputChange(e)}/>\n                    <TextField label=\"Password\" variant=\"standard\" name='password' onChange={(e)=>onInputChange(e)}/>\n\n                    {error && <Error>{error}</Error>}\n\n                    <SignupButton variant='standard' onClick={()=> signupUser()}>Sign Up</SignupButton>\n                    <Text style={{ textAlign: 'center' }}>OR</Text>\n                    <LoginButton onClick={()=> toogleAcc()}>Already Have an Account</LoginButton>\n                </Wrapper>\n            }\n        </Component>\n    );\n}\n\n\nconst Component = styled(Box)`\n    width: 400px;\n    margin: auto;\n    box-shadow: 5px 2px 5px 2px rgb(0 0 0/ 0.6);\n`;\n\nconst Image = styled('img')({\n    width: 100,\n    display: 'flex',\n    margin: 'auto',\n    padding: '50px 0 0'\n});\n\nconst Wrapper = styled(Box)`\n    padding: 25px 35px;\n    display: flex;\n    flex: 1;\n    overflow: auto;\n    flex-direction: column;\n    & > div, & > button, & > p {\n        margin-top: 20px;\n    }\n`;\n\nconst LoginButton = styled(Button)`\n    text-transform: none;\n    background: #FB641B;\n    color: #fff;\n    height: 48px;\n    border-radius: 2px;\n`;\n\nconst SignupButton = styled(Button)`\n    text-transform: none;\n    background: #fff;\n    color: #2874f0;\n    height: 48px;\n    border-radius: 2px;\n    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 20%);\n`;\n\nconst Text = styled(Typography)`\n    color: #878787;\n    font-size: 12px;\n`;\nconst Error = styled(Typography)`\n    font-size: 10px;\n    color: #ff6161;\n    line-height: 0;\n    margin-top: 10px;\n    font-weight: 600;\n`\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}