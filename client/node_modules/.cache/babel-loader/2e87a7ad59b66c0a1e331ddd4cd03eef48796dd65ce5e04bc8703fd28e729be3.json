{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/arkajit/Desktop/shareYourExp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2;import{useState,useEffect,useContext}from'react';import{Box,TextareaAutosize,Button,styled}from'@mui/material';//components\nimport Comment from'./Comment';import{API}from'../../service/api';import{DataContext}from'../../context/DataProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialValue={name:'',postId:'',date:new Date(),comments:''};var Comments=function Comments(_ref){var post=_ref.post;var url='https://static.thenounproject.com/png/12017-200.png';var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),toggle=_useState6[0],setToggle=_useState6[1];var _useContext=useContext(DataContext),account=_useContext.account;useEffect(function(){var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return API.getAllComments(post._id);case 2:response=_context.sent;if(response.isSuccess){setComments(response.data);}case 4:case\"end\":return _context.stop();}},_callee);}));return function getData(){return _ref2.apply(this,arguments);};}();getData();},[toggle,post]);var handleChange=function handleChange(e){setComment(_objectSpread(_objectSpread({},comment),{},{name:account.username,postId:post._id,comments:e.target.value}));};var addComment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.newComment(comment);case 2:setComment(initialValue);setToggle(function(prev){return!prev;});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function addComment(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Image,{src:url,alt:\"dp\"}),/*#__PURE__*/_jsx(StyledTextArea,{rowsMin:5,placeholder:\"what's on your mind?\",onChange:function onChange(e){return handleChange(e);},value:comment.comments}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",size:\"medium\",style:{height:40},onClick:function onClick(e){return addComment(e);},children:\"Post\"})]}),/*#__PURE__*/_jsx(Box,{children:comments&&comments.length>0&&comments.map(function(comment){return/*#__PURE__*/_jsx(Comment,{comment:comment,setToggle:setToggle});})})]});};var Container=styled(Box)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-top: 100px;\\n    display: flex;\\n\"])));var Image=styled('img')({width:50,height:50,borderRadius:'50%'});var StyledTextArea=styled(TextareaAutosize)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    height: 100px !important;\\n    width: 100%; \\n    margin: 0 20px;\\n\"])));export default Comments;","map":{"version":3,"names":["useState","useEffect","useContext","Box","TextareaAutosize","Button","styled","Comment","API","DataContext","initialValue","name","postId","date","Date","comments","Comments","post","url","comment","setComment","setComments","toggle","setToggle","account","getData","getAllComments","_id","response","isSuccess","data","handleChange","e","username","target","value","addComment","newComment","prev","height","length","map","Container","Image","width","borderRadius","StyledTextArea"],"sources":["/home/arkajit/Desktop/shareYourExp/client/src/components/details/Comments.jsx"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { Box, TextareaAutosize, Button, styled } from '@mui/material';\n\n\n\n\n//components\nimport Comment from './Comment';\nimport { API } from '../../service/api';\nimport { DataContext } from '../../context/DataProvider';\n\nconst initialValue = {\n    name: '',\n    postId: '',\n    date: new Date(),\n    comments: ''\n}\n\nconst Comments = ({ post }) => {\n    const url = 'https://static.thenounproject.com/png/12017-200.png'\n\n    const [comment, setComment] = useState(initialValue);\n    const [comments, setComments] = useState([]);\n    const [toggle, setToggle] = useState(false);\n\n    const { account } = useContext(DataContext);\n\n    useEffect(() => {\n        const getData = async () => {\n            const response = await API.getAllComments(post._id);\n            if (response.isSuccess) {\n                setComments(response.data);\n            }\n        }\n        getData();\n    }, [toggle, post]);\n\n    const handleChange = (e) => {\n        setComment({\n            ...comment,\n            name: account.username,\n            postId: post._id,\n            comments: e.target.value\n        });\n    }\n\n    const addComment = async() => {\n        await API.newComment(comment);\n        setComment(initialValue)\n        setToggle(prev => !prev);\n    }\n    \n    return (\n        <Box>\n            <Container>\n                <Image src={url} alt=\"dp\" />   \n                <StyledTextArea \n                    rowsMin={5} \n                    placeholder=\"what's on your mind?\"\n                    onChange={(e) => handleChange(e)} \n                    value={comment.comments}\n                />\n                <Button \n                    variant=\"contained\" \n                    color=\"primary\" \n                    size=\"medium\" \n                    style={{ height: 40 }}\n                    onClick={(e) => addComment(e)}\n                >Post</Button>             \n            </Container>\n            <Box>\n                {\n                    comments && comments.length > 0 && comments.map(comment => (\n                        <Comment comment={comment} setToggle={setToggle} />\n                    ))\n                }\n            </Box>\n        </Box>\n    )\n}\nconst Container = styled(Box)`\n    margin-top: 100px;\n    display: flex;\n`;\n\nconst Image = styled('img')({\n    width: 50,\n    height: 50,\n    borderRadius: '50%'\n});\n\nconst StyledTextArea = styled(TextareaAutosize)`\n    height: 100px !important;\n    width: 100%; \n    margin: 0 20px;\n`;\n\nexport default Comments;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}